// ==UserScript==
// @name         Evades-SP
// @version      exp-6
// @description  Evades Scripts Paradise, common script that links other scripts
// @author       EtherCD
// @match        https://*.evades.io/*
// @downloadURL  https://raw.githubusercontent.com/EtherCD/EvadesSp/main/build/evadessp.js
// @updateURL    https://raw.githubusercontent.com/EtherCD/EvadesSp/main/build/evadessp.js
// @icon         https://raw.githubusercontent.com/EtherCD/EvadesSP/main/repo/favicon.svg
// @license      MIT License
// @run-at       document-idle
// @grant        none
// ==/UserScript==

(()=>{"use strict";var e={851:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=s(842);t.default=class{constructor(){this.elements=[],this.settings=new n.default}add(e){this.elements.push(e)}push(){this.settings.push()}}},842:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){let e=document.createElement("div");e.setAttribute("id","esp-button"),e.style.cursor="pointer",e.style.position="absolute",e.style.bottom="10px",e.style.right="10px",e.innerHTML='<img width="32" height="32" src="https://raw.githubusercontent.com/EtherCD/EvadesSP/main/repo/settings.svg"/>';let t=document.createElement("div");t.setAttribute("id","esp-menu"),t.classList.add("settings"),t.style.display="none",e.onclick=()=>{const e=document.getElementById("esp-menu");e.style.display="none"===e.style.display?"":"none"},this.button=e,this.menu=t,window.observerSubs.push(this.ping)}ping(e){"menu"!==e.currentPage&&"server-list"!==e.currentPage?(document.getElementById("esp-button").style.display="none",document.getElementById("esp-menu").style.display="none"):document.getElementById("esp-button").style.display=""}updateMenu(){this.menu.innerHTML=`\n    <span class="settings-title">Scripts</span>\n    <input type="button" class="settings-exit" value="X" onclick="document.getElementById('esp-menu').style.display = 'none'">\n    <div class="settings-container">\n    ${(()=>{let e="";for(const t in window.scripts.scripts){const s=window.scripts.scripts[t];e+=`<label class="settings-label">\n        <div class="settings-setting">\n          <img src='${s.icon}' width='36'/>\n          <span style='position:absolute;'>${s.name}</span>\n          <span style='color: #ffffff77'>${s.description}</span>\n          <input style="float: right;" type="checkbox" disabled ${s.enabled?"checked":""}/>\n          </div>\n        </label>`}return e})()}\n    </div>\n    `}push(){document.body.appendChild(this.button),this.updateMenu(),document.body.appendChild(this.menu)}}},287:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateState=t.submitChanges=t.checkChanges=t.isPage=void 0,t.isPage=(e,t)=>!!e.target.classList&&e.target.classList.contains(t),t.checkChanges=()=>window.observerState.cur.currentPage!==window.observerState.old.currentPage&&(window.observerState.old=JSON.parse(JSON.stringify(window.observerState.cur)),!0),t.submitChanges=()=>{(0,t.checkChanges)()&&window.observerSubs.forEach((e=>e(window.observerState.cur)))},t.updateState=e=>{if(!e.target.classList||0===e.target.classList.length)return;let s=window.observerState.cur;(0,t.isPage)(e,"menu")&&(s.currentPage="menu"),(0,t.isPage)(e,"server-browser-box")&&(s.currentPage="server-list"),(0,t.isPage)(e,"leaderboard-title-break")&&(s.currentPage="game"),(0,t.isPage)(e,"hero-select")&&(s.currentPage="hero-select"),(0,t.isPage)(e,"results")&&(s.currentPage="game-end"),window.observerState.cur=s,(0,t.submitChanges)()}},31:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.observerRegister=void 0;const i=s(287);t.observerRegister=()=>{window.observerState={cur:{currentPage:"menu"},old:{currentPage:"menu"}},window.observerSubs=[],document.body.addEventListener("DOMNodeInserted",(e=>(0,i.updateState)(e)),!1)},r(s(287),t),r(s(466),t)},466:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},290:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.replaces=[],this.vars={},this.name=e.name,this.icon=e.icon??"https://raw.githubusercontent.com/EtherCD/EvadesSP/main/repo/empty-script.svg",this.version=e.version??"none",this.description=e.description??"Description is not added",this.enabled=!0}addReplace(e,t){this.replaces.push([e,this.formatReplace(t)])}addReplaces(...e){for(const t in e)this.addReplace(e[t][0],e[t][1])}formatReplace(e){return e.replace(/#\{([^\}]+)\}/g,((e,t)=>`window.scripts.get("${this.name}").getVar("${t}")`))}addVar(e,t){this.vars[e]=t}getVar(e){return this.vars[e]}patch(e){for(const t in this.replaces)e=e.replace(this.replaces[t][0],this.replaces[t][1]);return console.log(this.name+" was loaded!"),e}}},272:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=s(290);t.default=class{constructor(){this.scripts=[]}add(e){this.scripts.push(new n.default(e))}get(e){for(const t in this.scripts)if(this.scripts[t].name===e)return this.scripts[t];throw new Error("Script is not found!")}init(){let e=Array.from(document.querySelectorAll("script")).filter((e=>"module"===e.type&&e.src.match(/\/index\.[0-9a-f]{8}\.js/)))[0];if(!e)return;navigator.userAgent.includes("Firefox")||e.remove();let t=e.src,s=new XMLHttpRequest;s.open("GET",t,!1),s.send();let n=s.response;for(const e in this.scripts)n=this.scripts[e].patch(n);let r=document.createElement("script");r.setAttribute("type","module"),r.innerHTML=n,document.body.appendChild(r),console.log("All Scripts was loaded!")}}}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,s),i.exports}(()=>{const e=s(851),t=s(31),n=s(272);window.scripts=new n.default,(0,t.observerRegister)();const r=new e.default;document.addEventListener("readystatechange",(()=>{-1===window.location.href.search(/\/profile/g)&&-1===window.location.href.search(/\/account/g)&&window.scripts.init(),r.push()}))})()})();